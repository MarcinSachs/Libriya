<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jesteś offline – Libriya</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        body { background: #f8fafc; color: #1a535c; font-family: 'Inter', Arial, sans-serif; }
        .offline-container { max-width: 420px; margin: 60px auto; background: #fff; border-radius: 1.5rem; box-shadow: 0 4px 24px rgba(0,0,0,0.07); padding: 2.5rem 2rem; text-align: center; }
        .offline-logo { width: 64px; margin-bottom: 1rem; }
        .offline-title { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .offline-desc { color: #555; margin-bottom: 1.5rem; }
        .offline-list { text-align: left; margin: 1.5rem 0 1rem 0; }
        .offline-list li { margin-bottom: 0.5rem; }
        .offline-btn { margin-top: 2rem; }
    </style>
</head>
<body>
    <div class="offline-container">
        <img src="/static/images/logo.svg" alt="Libriya" class="offline-logo">
        <div class="offline-title">Jesteś offline</div>
        <div class="offline-desc">
            Brak połączenia z internetem.<br>
            Możesz korzystać z aplikacji w trybie offline w ograniczonym zakresie.
        </div>
        <ul class="offline-list">
            <li>✅ Przeglądanie pobranych książek, okładek i stron</li>
            <li>✅ Przeglądanie ustawień użytkownika (jeśli były otwierane online)</li>
            <li>✅ Przeglądanie pobranych bibliotek i wypożyczeń</li>
            <li>❌ Dodawanie/edycja/usuwanie książek</li>
            <li>❌ Dodawanie do ulubionych, zmiana opisu</li>
            <li>❌ Synchronizacja z serwerem</li>
        </ul>
        <div class="offline-desc">
            Po odzyskaniu połączenia dane zostaną zsynchronizowane automatycznie lub po odświeżeniu strony.
        </div>
        <a href="/dashboard" class="btn btn-primary offline-btn">Strona główna</a>
        <div id="offline-extra" class="offline-desc" style="margin-top:2rem;"></div>
    </div>
    <script>
    // Wyświetl wersję aplikacji i datę ostatniej synchronizacji, jeśli są dostępne
    (function() {
        let html = '';
        // Wersja aplikacji (możesz podmienić na dynamiczną jeśli masz window.appVersion)
        html += '<div><b>Wersja aplikacji:</b> <span id="app-version">3.0</span></div>';
        // Data ostatniej synchronizacji (jeśli była pobierana offline)
        try {
            const info = localStorage.getItem('offlineCacheInfo');
            if (info) {
                const parsed = JSON.parse(info);
                if (parsed.timestamp) {
                    html += '<div><b>Ostatnia synchronizacja:</b> ' + new Date(parsed.timestamp).toLocaleString() + '</div>';
                }
                if (parsed.booksCount) {
                    html += '<div><b>Pobrane książki:</b> ' + parsed.booksCount + '</div>';
                }
                if (parsed.coversCount) {
                    html += '<div><b>Pobrane okładki:</b> ' + parsed.coversCount + '</div>';
                }
            }
        } catch(e) {}
        document.getElementById('offline-extra').innerHTML = html;
    })();
    </script>
</body>
</html>
