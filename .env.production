# Production Configuration - Production-Ready Settings
# Copy to .env when deploying to production

# ============ SECURITY ============
FLASK_ENV=production
APP_ENV=production
DEBUG=False
TESTING=False

# WICHTIG: Wygeneruj silny klucz
# python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=CHANGE_ME_TO_RANDOM_VALUE_AT_LEAST_32_CHARS

# ============ DATABASE ============
# Dla production rekomendujemy MySQL/MariaDB z SSL
# DATABASE_URL=mysql+pymysql://libriya_user:secure_password@db.example.com:3306/libriya_db?charset=utf8mb4

# ============ SESSION SECURITY ============
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_SAMESITE=Lax
PERMANENT_SESSION_LIFETIME=3600

# ============ RATE LIMITING ============
# IMPORTANT: In production, Redis MUST be configured for rate limiting
# Development uses in-memory store (SimpleCache) - no Redis needed
# Production uses Redis backend - ensures consistent limits across workers

# Format: redis://[:password]@host:port/db
# Examples:
#   Local: redis://localhost:6379/1
#   Remote: redis://:your_password@redis.example.com:6379/1
#   Docker Compose: redis://redis:6379/1
RATELIMIT_STORAGE_URL=redis://:your_secure_password@redis.example.com:6379/1

# ============ HTTPS ============
# Zestaw HTTPS_REDIRECT=True do wymuszenia HTTP→HTTPS
HTTPS_REDIRECT=True

# ============ EMAIL ============
# MAIL_SERVER=
# MAIL_PORT=465
# MAIL_USERNAME=
# MAIL_USE_SSL=True
# MAIL_PASSWORD=
# MAIL_DEFAULT_SENDER=

# ============ MONITORING ============
# Sentry (Error Tracking)
SENTRY_DSN=https://key@sentry.io/project_id

# ============ PASSWORD SECURITY ============
# Enable HIBP (Have I Been Pwned) check w production
ENABLE_PWNED_CHECK=True
HIBP_TIMEOUT=5.0
HIBP_CACHE_TTL=86400

# ============ LOGGING ============
LOG_LEVEL=WARNING

# ============ BACKUP ============
# Configure automated backups
BACKUP_SCHEDULE_HOUR=2
BACKUP_SCHEDULE_MINUTE=0

# ============ OPTIONAL: ENCRYPTION ============
# Dla szyfrowania wrażliwych pól
# ENCRYPTION_KEY=base64_encoded_key_here

# ============ OPTIONAL: MFA ============
# MFA_ENABLED=True
# MFA_TOTP_ISSUER=Libriya


